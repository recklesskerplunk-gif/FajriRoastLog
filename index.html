<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fajri Roast Log V.1.1</title>
  <style>
    :root{
      --accent:#b8562f;      /* warna aksen */
      --bg:#fffaf3;          /* latar lembut */
      --text:#222;
      --box:#f2e8da;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans",sans-serif;}
    .container{max-width:960px;margin:40px auto;padding:0 20px;}
    h1{margin:0 0 4px; font-size:28px; text-align:center;}
    h2{margin:0 0 16px; font-size:18px; text-align:center; color:#555;}
    /* Grid 4 meta di top-center */
    .meta-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
      align-items:end;
      margin:20px auto;
      max-width:900px;
    }
    .meta-grid .field{display:flex; flex-direction:column;}
    .meta-grid label{font-size:13px; color:#444; margin-bottom:6px;}
    .meta-grid input{
      height:36px; border:1px solid #c8b89e; border-radius:8px;
      padding:0 10px; font-size:14px; background:#fff;
    }
    /* Tombol */
    .controls{display:flex; gap:10px; justify-content:center; margin:18px 0 26px;}
    button{
      height:40px; padding:0 16px; border-radius:10px; border:1px solid #c8b89e;
      background:#fff; color:#222; font-weight:600; cursor:pointer;
    }
    button.primary{background:var(--accent); color:#fff; border-color:#a24c2a;}
    button:disabled{opacity:.6; cursor:not-allowed;}
    /* Kotak Stopwatch */
    .stopwatch-box{
      display:none; /* muncul saat Start ditekan */
      border:2px solid #d2c4ad; background:var(--box);
      border-radius:16px; padding:24px;
      max-width:900px; margin:0 auto 24px;
      box-shadow:0 6px 24px rgba(0,0,0,.08);
    }
    .stopwatch-title{
      font-size:16px; font-weight:700; color:#6a4a30; text-align:center; margin-bottom:12px;
    }
    .time{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight:700; text-align:center;
      font-size:64px; line-height:1; letter-spacing:1px;
    }
    .sub{
      text-align:center; color:#6a4a30; margin-top:6px; font-size:13px;
    }
    /* Bagian input suhu dsb (placeholder) */
    .section{margin:24px auto; max-width:900px;}
    .section h3{margin:12px 0; font-size:18px; color:#473525;}
    .inline{display:flex; flex-wrap:wrap; gap:12px;}
    .inline .field{flex:1 1 220px;}
    .inline label{display:block; font-size:13px; color:#444; margin-bottom:6px;}
    .inline input{height:36px; border:1px solid #c8b89e; border-radius:8px; padding:0 10px; font-size:14px; background:#fff;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Fajri Roast Log V.1.1</h1>
    <h2>Meta Top-Center</h2>

    <!-- 4 META (baris inputan) -->
    <div class="meta-grid" id="metaTop">
      <div class="field">
        <label for="roastMaster">Roast Master</label>
        <input type="text" id="roastMaster" placeholder="Nama operator">
      </div>
      <div class="field">
        <label for="roasterMachine">Roaster Machine</label>
        <input type="text" id="roasterMachine" placeholder="Tipe/Model mesin">
      </div>
      <div class="field">
        <label for="coffee">Coffee</label>
        <input type="text" id="coffee" placeholder="Origin/Varietas">
      </div>
      <div class="field">
        <label for="moisture">Moisture Content (%)</label>
        <input type="number" step="0.1" id="moisture" placeholder="mis. 11.2">
      </div>
    </div>

    <!-- ⬇️ DITAMBAHKAN: Tombol Start + Pause (setelah 4 meta) -->
    <div class="controls">
      <button id="startBtn" class="primary" type="button" aria-controls="stopwatchBox">Start Roasting</button>
      <button id="pauseBtn" type="button" disabled>Pause</button>
    </div>

    <!-- ⬇️ DITAMBAHKAN: Kotak Stopwatch besar -->
    <section id="stopwatchBox" class="stopwatch-box" aria-live="polite">
      <div class="stopwatch-title">Roasting Stopwatch</div>
      <div id="timeDisplay" class="time">00:00:00.000</div>
      <div class="sub">Tekan <strong>Pause</strong> untuk berhenti sementara, tekan lagi untuk <strong>Resume</strong>.</div>
    </section>

    <!-- Bagian lain dari log (opsional, placeholder dari teks awal Anda) -->
    <div class="section">
      <h3>Input Suhu per Menit (80°C–250°C)</h3>
      <div class="inline">
        <div class="field">
          <label for="suhuAwal">Suhu Awal (saat memasukkan biji ke drum)</label>
          <input id="suhuAwal" type="number" step="0.1" placeholder="°C">
        </div>
        <div class="field">
          <label for="turningPoint">Suhu Turning Point</label>
          <input id="turningPoint" type="number" step="0.1" placeholder="°C">
        </div>
        <div class="field">
          <label for="firstCrack">Suhu First Crack</label>
          <input id="firstCrack" type="number" step="0.1" placeholder="°C">
        </div>
        <div class="field">
          <label for="secondCrack">Suhu Second Crack (opsional)</label>
          <input id="secondCrack" type="number" step="0.1" placeholder="°C">
        </div>
        <div class="field">
          <label for="dropTime">Drop Time (menit, boleh desimal)</label>
          <input id="dropTime" type="number" step="0.01" placeholder="menit">
        </div>
        <div class="field">
          <label for="suhuAkhirDrop">Suhu Akhir Drop (opsional)</label>
          <input id="suhuAkhirDrop" type="number" step="0.1" placeholder="°C">
        </div>
      </div>
    </div>

    <div class="section">
      <h3>End Of Roast</h3>
      <!-- Catatan akhir / ringkasan roast -->
    </div>
  </div>

  <!-- JavaScript Stopwatch -->
  <script>
    (function(){
      const startBtn = document.getElementById('startBtn');
      const pauseBtn = document.getElementById('pauseBtn');
      const box      = document.getElementById('stopwatchBox');
      const display  = document.getElementById('timeDisplay');

      let running = false;
      let startStamp = 0;   // timestamp saat mulai/lanjut
      let elapsedMs  = 0;   // akumulasi waktu (ms)
      let rafId      = null;

      function format(ms){
        const h = Math.floor(ms / 3600000);
        const m = Math.floor((ms % 3600000) / 60000);
        const s = Math.floor((ms % 60000) / 1000);
        const ms3 = Math.floor(ms % 1000);
        const pad2 = n => String(n).padStart(2,'0');
        const pad3 = n => String(n).padStart(3,'0');
        return `${pad2(h)}:${pad2(m)}:${pad2(s)}.${pad3(ms3)}`;
      }

      function tick(){
        const now = performance.now();
        const delta = now - startStamp;
        display.textContent = format(elapsedMs + delta);
        rafId = requestAnimationFrame(tick);
      }

      function startRoasting(){
        // Tampilkan kotak & mulai jalan
        box.style.display = 'block';
        if(!running){
          running = true;
          startStamp = performance.now();
          rafId = requestAnimationFrame(tick);
          startBtn.disabled = true; // mencegah start ulang
          pauseBtn.disabled = false;
          pauseBtn.textContent = 'Pause';
        }
      }

      function pauseResume(){
        if(running){
          // Pause
          running = false;
          cancelAnimationFrame(rafId);
          rafId = null;
          // tambahkan delta terakhir ke akumulasi
          elapsedMs += performance.now() - startStamp;
          pauseBtn.textContent = 'Resume';
        }else{
          // Resume dari waktu terakhir
          running = true;
          startStamp = performance.now();
          rafId = requestAnimationFrame(tick);
          pauseBtn.textContent = 'Pause';
        }
      }

      startBtn.addEventListener('click', startRoasting);
      pauseBtn.addEventListener('click', pauseResume);

      // Keamanan: hentikan RAF jika tab disembunyikan saat pause
      document.addEventListener('visibilitychange', () => {
        if(document.hidden && running){
          // otomatis pause agar tidak drift saat tab tidak aktif
          pauseResume();
        }
      });
    })();
  </script>
</body>
</html>
